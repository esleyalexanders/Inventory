<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quy Trình: Quản Lý Tồn Kho & Chất Lượng - Tự Động ERP</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, Helvetica, sans-serif; line-height: 1.6; color: #000; background: #fff; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .header { border-bottom: 3px solid #000; padding-bottom: 20px; margin-bottom: 40px; }
        .header h1 { font-size: 28px; font-weight: bold; margin-bottom: 10px; color: #1a1a1a; }
        .header p { font-size: 16px; color: #666; }
        .back-link { display: inline-block; margin-bottom: 20px; color: #2c5aa0; text-decoration: none; font-size: 14px; }
        .back-link:hover { text-decoration: underline; }
        .section { margin-bottom: 40px; }
        h2 { font-size: 22px; font-weight: bold; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #333; color: #1a1a1a; }
        h3 { font-size: 18px; font-weight: bold; margin: 25px 0 15px 0; padding: 12px; background: #f5f5f5; border-left: 4px solid #666; }
        h4 { font-size: 16px; font-weight: bold; margin: 20px 0 10px 0; color: #333; }
        p { margin-bottom: 12px; font-size: 14px; }
        ul { margin: 10px 0 15px 25px; font-size: 14px; }
        li { margin: 8px 0; }
        .flowchart-container { background: #f8f8f8; border: 2px solid #ddd; border-radius: 5px; padding: 30px; margin: 30px 0; text-align: center; overflow-x: auto; }
        .mermaid { display: inline-block; text-align: left; }
        .explanation-box { border: 2px solid #666; padding: 25px; margin: 20px 0; background: #f8f8f8; border-radius: 5px; }
        .step-box { background: #fff; border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-left: 4px solid #2c5aa0; }
        .step-box h4 { color: #2c5aa0; margin-top: 0; }
        .automation-point { border-left: 4px solid #28a745; padding: 15px 20px; margin: 15px 0; background: #f1f9f4; }
        .automation-point h4 { color: #28a745; margin-top: 0; }
        .code-section { margin: 30px 0; }
        .code-container { background: #2d2d2d; border-radius: 5px; padding: 0; margin: 20px 0; position: relative; }
        .code-header { background: #1a1a1a; padding: 10px 20px; border-radius: 5px 5px 0 0; display: flex; justify-content: space-between; align-items: center; }
        .code-title { color: #fff; font-size: 14px; font-weight: bold; }
        .copy-button { background: #2c5aa0; color: #fff; border: none; padding: 6px 15px; border-radius: 3px; cursor: pointer; font-size: 12px; transition: background 0.3s; }
        .copy-button:hover { background: #1e3f7a; }
        .copy-button.copied { background: #28a745; }
        pre { margin: 0; padding: 20px; overflow-x: auto; }
        code { font-family: 'Courier New', monospace; font-size: 13px; color: #f8f8f2; line-height: 1.5; }
        @media print { .container { max-width: 100%; } .copy-button { display: none; } }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Quay lại Tổng quan hệ thống</a>

        <div class="header">
            <h1>Quy Trình: Quản Lý Tồn Kho & Chất Lượng</h1>
            <p>Theo dõi tồn kho theo thời gian thực, kiểm tra chất lượng, quản lý trạng thái tồn và cảnh báo tự động</p>
        </div>

        <div class="section">
            <h2>1. Sơ Đồ Quy Trình</h2>
            <div class="flowchart-container">
                <div class="mermaid">
flowchart TD
    A[Hàng đến kho] --> B[Quét &amp; ghi nhận nhập kho]
    B --> C[Hệ thống tạo GRN]
    C --> D[Trạng thái tồn: Quarantine]
    D --> E[Kích hoạt kiểm tra QC]
    E --> F[QC thực hiện kiểm tra]
    F --> G{Kết quả QC?}
    G -->|Đạt| H[Cập nhật trạng thái: Available]
    H --> I[Cập nhật số lượng tồn]
    I --> J[Hàng sẵn sàng sử dụng]
    G -->|Không đạt| K[Cập nhật trạng thái: Blocked]
    K --> L[Tách hàng bị loại]
    L --> M[Thông báo vendor/nhà cung cấp]
    M --> N[Vendor xử lý]
    J --> O[Hệ thống giám sát mức tồn]
    O --> P{Tồn dưới mức tối thiểu?}
    P -->|Có| Q[Tự động tạo cảnh báo thiếu tồn]
    Q --> R[Thông báo bộ phận mua]
    R --> S[Kích hoạt quy trình bù hàng]
    P -->|Không| T[Tiếp tục giám sát]
    T --> O
    J --> U[Lấy vật tư cho đơn hàng]
    U --> V[Hệ thống giữ tồn]
    V --> W[Cập nhật số lượng khả dụng]
    W --> X[Xuất kho]
    X --> Y[Cập nhật tồn sau xuất]
    Y --> Z[Cân bằng tồn kho thời gian thực]
                </div>
            </div>
        </div>

        <div class="section">
            <h2>2. Giải thích sơ đồ</h2>
            <div class="explanation-box">
                <p>Luồng quản lý tồn kho và QC đảm bảo theo dõi tồn kho chính xác theo thời gian thực với kiểm tra chất lượng tích hợp. Tất cả phiếu nhận hàng (GRN) được tự động tạo, QC được kích hoạt theo quy trình, và hệ thống giám sát mức tồn liên tục. Trạng thái tồn (Quarantine → Available/Blocked) được quản lý tự động và cảnh báo bù hàng được sinh khi cần.</p>
            </div>

            <h3>Các bước quy trình</h3>

            <div class="step-box">
                <h4>Bước 1: Hàng đến kho</h4>
                <p><strong>Kích hoạt:</strong> Hàng vật lý đến bến nhận.</p>
                <p><strong>Nguồn hàng:</strong></p>
                <ul>
                    <li>Giao hàng từ vendor/nhà cung cấp</li>
                    <li>Trả hàng từ gia công ngoài</li>
                    <li>Hoàn thành sản xuất nội bộ</li>
                    <li>Trả hàng khách</li>
                    <li>Chuyển kho nội bộ</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 2: Quét &amp; ghi nhận nhập kho</h4>
                <p><strong>Hành động:</strong> Nhân viên kho quét và ghi nhận hàng vào hệ thống.</p>
                <p><strong>Dữ liệu ghi nhận:</strong></p>
                <ul>
                    <li>Tham chiếu PO hoặc Work Order</li>
                    <li>Mã hàng và mô tả</li>
                    <li>Số lượng nhận</li>
                    <li>Ngày giờ nhận</li>
                    <li>Vị trí nhận</li>
                    <li>Batch/lot nếu có</li>
                    <li>Packing list</li>
                    <li>Ghi chú tình trạng ban đầu</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 3: Hệ thống tạo GRN</h4>
                <p><strong>Hành động:</strong> Hệ thống tạo Goods Receipt Note tự động.</p>
                <p><strong>GRN bao gồm:</strong></p>
                <ul>
                    <li>Số GRN duy nhất</li>
                    <li>Chi tiết phiếu nhận từ Bước 2</li>
                    <li>So sánh với PO/Work Order</li>
                    <li>Ghi chú sai khác nếu có</li>
                    <li>Timestamp và người nhận</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 4: Trạng thái tồn: Quarantine</h4>
                <p><strong>Hành động:</strong> Hệ thống đặt trạng thái ban đầu là "Quarantine".</p>
                <p><strong>Ý nghĩa:</strong></p>
                <ul>
                    <li>Hàng đã nhận nhưng CHƯA sẵn sàng sử dụng</li>
                    <li>Số lượng ghi nhận nhưng chưa phân bổ</li>
                    <li>Chờ phê duyệt QC</li>
                    <li>Đặt tại khu vực giữ QC</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 5: Kích hoạt kiểm tra QC</h4>
                <p><strong>Hành động:</strong> Hệ thống tạo công việc QC tự động.</p>
                <p><strong>Hành động tự động:</strong></p>
                <ul>
                    <li>Tạo task kiểm tra QC</li>
                    <li>Thông báo inspector</li>
                    <li>Tạo checklist theo loại hàng</li>
                    <li>Gán mức ưu tiên và SLA</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 6: QC thực hiện kiểm tra</h4>
                <p><strong>Hành động:</strong> Inspector thực hiện kiểm tra vật lý và ghi kết quả.</p>
                <p><strong>Các hoạt động QC:</strong></p>
                <ul>
                    <li>Kiểm tra hình thức, hư hỏng</li>
                    <li>Đo kích thước nếu cần</li>
                    <li>Kiểm tra chứng từ vật liệu</li>
                    <li>Thử nghiệm mẫu nếu cần</li>
                    <li>Kiểm đếm số lượng</li>
                </ul>
            </div>

            <div class="step-box">
                <h4>Bước 7: Quyết định kết quả QC</h4>
                <p><strong>Quyết định:</strong> Hàng đạt hay không đạt QC?</p>
                <p><strong>Tiêu chí đạt:</strong></p>
                <ul>
                    <li>Đạt thông số kỹ thuật</li>
                    <li>Không có khuyết tật</li>
                    <li>Số lượng khớp PO</li>
                    <li>Chứng từ đầy đủ</li>
                </ul>
                <p><strong>Tiêu chí không đạt:</strong></p>
                <ul>
                    <li>Khuyết tật vượt ngưỡng cho phép</li>
                    <li>Kích thước sai</li>
                    <li>Thiếu chứng nhận</li>
                    <li>Số lượng sai</li>
                </ul>
            </div>

            <h3>Luồng QC đạt</h3>

            <div class="step-box">
                <h4>Bước 8: Cập nhật trạng thái: Available</h4>
                <p><strong>Hành động:</strong> Hệ thống đổi trạng thái từ "Quarantine" → "Available".</p>
            </div>

            <div class="step-box">
                <h4>Bước 9: Cập nhật số lượng tồn</h4>
                <p><strong>Hành động:</strong> Hệ thống cập nhật số lượng tồn thực tế và khả dụng.</p>
            </div>

            <div class="step-box">
                <h4>Bước 10: Hàng sẵn sàng sử dụng</h4>
                <p><strong>Hệ thống:</strong> Thông báo cho sản xuất, bán hàng và lập kế hoạch.</p>
            </div>

            <h3>Luồng QC không đạt</h3>

            <div class="step-box">
                <h4>Bước 11: Cập nhật trạng thái: Blocked</h4>
                <p><strong>Hành động:</strong> Hệ thống đặt trạng thái "Blocked" và không cho phép phân bổ.</p>
            </div>

            <div class="step-box">
                <h4>Bước 12: Tách hàng bị loại</h4>
                <p><strong>Hành động:</strong> Kho tách và dán nhãn hàng bị loại.</p>
            </div>

            <div class="step-box">
                <h4>Bước 13: Thông báo vendor/nhà cung cấp</h4>
                <p><strong>Hành động:</strong> Hệ thống gửi thông báo kèm báo cáo QC và ảnh (nếu có).</p>
            </div>

            <div class="step-box">
                <h4>Bước 14: Vendor xử lý</h4>
                <p><strong>Hành động:</strong> Vendor xử lý theo yêu cầu: gửi hàng thay thế, phát hành credit hoặc sửa chữa.</p>
            </div>

            <h3>Giám sát tồn liên tục</h3>

            <div class="step-box">
                <h4>Bước 15: Hệ thống giám sát mức tồn</h4>
                <p><strong>Hành động:</strong> Hệ thống giám sát mức tồn theo thời gian thực.</p>
            </div>

            <div class="step-box">
                <h4>Bước 16: Quyết định: Tồn dưới mức tối thiểu?</h4>
                <p><strong>Quy tắc:</strong> Nếu Available ≤ Mức tối thiểu → cảnh báo được kích hoạt.</p>
            </div>

            <div class="step-box">
                <h4>Bước 17: Tự động tạo cảnh báo thiếu tồn</h4>
                <p><strong>Hành động:</strong> Hệ thống sinh cảnh báo với thông tin chi tiết và mức ưu tiên.</p>
            </div>

            <div class="step-box">
                <h4>Bước 18: Thông báo bộ phận mua</h4>
                <p><strong>Hành động:</strong> Gửi cảnh báo qua email, dashboard hoặc app di động.</p>
            </div>

            <div class="step-box">
                <h4>Bước 19: Kích hoạt quy trình bù hàng</h4>
                <p><strong>Hành động:</strong> Procurement thực hiện bù hàng (tự động hoặc thủ công).</p>
            </div>

            <div class="step-box">
                <h4>Bước 20: Tiếp tục giám sát</h4>
                <p><strong>Hành động:</strong> Hệ thống tiếp tục giám sát 24/7 và báo động khi cần.</p>
            </div>

            <h3>Quy trình giữ và xuất kho</h3>

            <div class="step-box">
                <h4>Bước 21: Lấy vật tư cho đơn hàng</h4>
                <p><strong>Hành động:</strong> Nhân viên kho lấy vật tư theo đơn hàng sản xuất hoặc bán hàng.</p>
            </div>

            <div class="step-box">
                <h4>Bước 22: Hệ thống giữ tồn</h4>
                <p><strong>Hành động:</strong> Hệ thống reserve số lượng cho đơn hàng.</p>
            </div>

            <div class="step-box">
                <h4>Bước 23: Cập nhật số lượng khả dụng</h4>
                <p><strong>Công thức:</strong> Khả dụng = On-Hand - Reserved</p>
            </div>

            <div class="step-box">
                <h4>Bước 24: Xuất kho</h4>
                <p><strong>Hành động:</strong> Vật tư rời kho để giao khách hoặc cho sản xuất.</p>
            </div>

            <div class="step-box">
                <h4>Bước 25: Cập nhật tồn sau xuất</h4>
                <p><strong>Hành động:</strong> Hệ thống cập nhật On-Hand, Reserved và lịch sử giao dịch.</p>
            </div>

            <div class="step-box">
                <h4>Bước 26: Cân bằng tồn kho thời gian thực</h4>
                <p><strong>Lợi ích:</strong> Tăng độ chính xác, theo dõi audit và hỗ trợ lập kế hoạch.</p>
            </div>

            <h3>Các điểm tự động chính</h3>

            <div class="automation-point">
                <h4>✓ Tạo GRN tự động</h4>
                <p>GRN tạo ngay khi ghi nhận nhập kho - không cần soạn tay.</p>
            </div>

            <div class="automation-point">
                <h4>✓ Kích hoạt QC tự động</h4>
                <p>QC được kích hoạt tự động theo checklist và SLA.</p>
            </div>

            <div class="automation-point">
                <h4>✓ Quản lý trạng thái tồn tự động</h4>
                <p>Trạng thái Quarantine → Available/Blocked được cập nhật theo kết quả QC.</p>
            </div>

            <div class="automation-point">
                <h4>✓ Cập nhật tồn thời gian thực</h4>
                <p>Tất cả giao dịch ảnh hưởng ngay đến số liệu On-Hand và Available.</p>
            </div>

            <div class="automation-point">
                <h4>✓ Cảnh báo thiếu tồn tự động</h4>
                <p>Hệ thống giám sát và sinh cảnh báo khi mức tối thiểu bị vượt qua.</p>
            </div>

            <div class="automation-point">
                <h4>✓ Thông báo vendor tự động</h4>
                <p>Vendor được thông báo kèm hồ sơ QC khi có từ chối để xử lý nhanh.</p>
            </div>

        </div>

        <div class="section code-section">
            <h2>3. Mã Mermaid Sơ Đồ</h2>
            <p>Sao chép đoạn mã dưới đây để sử dụng sơ đồ này trong tài liệu hoặc công cụ hỗ trợ Mermaid.</p>

            <div class="code-container">
                <div class="code-header">
                    <span class="code-title">Mã Sơ Đồ Mermaid</span>
                    <button class="copy-button" onclick="copyCode()">Sao chép mã</button>
                </div>
                <pre><code id="mermaid-code">flowchart TD
    A[Hàng đến kho] --> B[Quét &amp; ghi nhận nhập kho]
    B --> C[Hệ thống tạo GRN]
    C --> D[Trạng thái tồn: Quarantine]
    D --> E[Kích hoạt kiểm tra QC]
    E --> F[QC thực hiện kiểm tra]
    F --> G{Kết quả QC?}
    G -->|Đạt| H[Cập nhật trạng thái: Available]
    H --> I[Cập nhật số lượng tồn]
    I --> J[Hàng sẵn sàng sử dụng]
    G -->|Không đạt| K[Cập nhật trạng thái: Blocked]
    K --> L[Tách hàng bị loại]
    L --> M[Thông báo vendor/nhà cung cấp]
    M --> N[Vendor xử lý]
    J --> O[Hệ thống giám sát mức tồn]
    O --> P{Tồn dưới mức tối thiểu?}
    P -->|Có| Q[Tự động tạo cảnh báo thiếu tồn]
    Q --> R[Thông báo bộ phận mua]
    R --> S[Kích hoạt quy trình bù hàng]
    P -->|Không| T[Tiếp tục giám sát]
    T --> O
    J --> U[Lấy vật tư cho đơn hàng]
    U --> V[Hệ thống giữ tồn]
    V --> W[Cập nhật số lượng khả dụng]
    W --> X[Xuất kho]
    X --> Y[Cập nhật tồn sau xuất]
    Y --> Z[Cân bằng tồn kho thời gian thực]</code></pre>
            </div>
        </div>

        <div style="margin-top: 60px; padding-top: 20px; border-top: 2px solid #333; text-align: center; color: #666; font-size: 12px;">
            <p>Hệ thống Tự Động ERP - Tài liệu Quy Trình</p>
            <p>Khởi tạo: October 2025</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default', flowchart: { useMaxWidth: true, htmlLabels: true, curve: 'basis' } });

        function copyCode() {
            const code = document.getElementById('mermaid-code').textContent;
            const button = document.querySelector('.copy-button');
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = 'Đã sao chép!';
                button.classList.add('copied');
                setTimeout(function() { button.textContent = 'Sao chép mã'; button.classList.remove('copied'); }, 2000);
            }).catch(function(err) { console.error('Không thể sao chép: ', err); });
        }
    </script>
</body>
</html>
