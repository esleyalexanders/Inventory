
flowchart TD
    A[Nhận diện nhu cầu mua sắm] --> B[Hệ thống tự động tạo RFQ/PO]
    B --> C[Gửi đến vendor qua cổng/API/email]
    C --> D[Vendor xem RFQ/PO]
    D --> E{Vendor chấp nhận?}
    E -->|Có| F[Vendor xác nhận thời gian giao & giá]
    F --> G[Hệ thống cập nhật kế hoạch đơn hàng]
    G --> H[Vendor vận chuyển hàng]
    E -->|Không| I[Vendor đề xuất phương án khác]
    I --> J[Xem xét thủ công bởi bộ phận mua]
    J --> K{Chấp nhận phương án khác?}
    K -->|Có| F
    K -->|Không| L[Thương lượng lại hoặc tìm vendor mới]
    L --> B
    H --> M[Hàng đến kho]
    M --> N[Hệ thống ghi nhận nhập kho]
    N --> O[Kích hoạt kiểm tra chất lượng QC]
    O --> P{QC đạt?}
    P -->|Có| Q[Cập nhật tồn kho]
    Q --> R[Hàng sẵn sàng sử dụng]
    R --> S[Kích hoạt bước sản xuất tiếp theo]
    P -->|Không| T[QC không đạt - khóa tồn kho]
    T --> U[Thông báo vendor về vấn đề chất lượng]
    U --> V[Vendor xử lý]

    classDef automated fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    classDef decision fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef manual fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef vendor fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    
    class A,B,C,G,N,O,Q,R,S automated
    class E,K,P decision
    class J,L manual
    class D,F,H,I,U,V vendor