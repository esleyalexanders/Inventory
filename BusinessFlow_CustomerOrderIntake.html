<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Flow: Customer Order Intake - ERP Automation</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            color: #000;
            background: #fff;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .header {
            border-bottom: 3px solid #000;
            padding-bottom: 20px;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a1a1a;
        }
        
        .header p {
            font-size: 16px;
            color: #666;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #2c5aa0;
            text-decoration: none;
            font-size: 14px;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        h2 {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
            color: #1a1a1a;
        }
        
        h3 {
            font-size: 18px;
            font-weight: bold;
            margin: 25px 0 15px 0;
            padding: 12px;
            background: #f5f5f5;
            border-left: 4px solid #666;
        }
        
        h4 {
            font-size: 16px;
            font-weight: bold;
            margin: 20px 0 10px 0;
            color: #333;
        }
        
        p {
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        ul {
            margin: 10px 0 15px 25px;
            font-size: 14px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .flowchart-container {
            background: #f8f8f8;
            border: 2px solid #ddd;
            border-radius: 5px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            overflow-x: auto;
        }
        
        .mermaid {
            display: inline-block;
            text-align: left;
        }
        
        .explanation-box {
            border: 2px solid #666;
            padding: 25px;
            margin: 20px 0;
            background: #f8f8f8;
            border-radius: 5px;
        }
        
        .step-box {
            background: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #2c5aa0;
        }
        
        .step-box h4 {
            color: #2c5aa0;
            margin-top: 0;
        }
        
        .automation-point {
            border-left: 4px solid #28a745;
            padding: 15px 20px;
            margin: 15px 0;
            background: #f1f9f4;
        }
        
        .automation-point h4 {
            color: #28a745;
            margin-top: 0;
        }
        
        .code-section {
            margin: 30px 0;
        }
        
        .code-container {
            background: #2d2d2d;
            border-radius: 5px;
            padding: 0;
            margin: 20px 0;
            position: relative;
        }
        
        .code-header {
            background: #1a1a1a;
            padding: 10px 20px;
            border-radius: 5px 5px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-title {
            color: #fff;
            font-size: 14px;
            font-weight: bold;
        }
        
        .copy-button {
            background: #2c5aa0;
            color: #fff;
            border: none;
            padding: 6px 15px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .copy-button:hover {
            background: #1e3f7a;
        }
        
        .copy-button.copied {
            background: #28a745;
        }
        
        pre {
            margin: 0;
            padding: 20px;
            overflow-x: auto;
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #f8f8f2;
            line-height: 1.5;
        }
        
        .legend {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .legend h4 {
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .legend-item {
            display: inline-block;
            margin-right: 30px;
            margin-bottom: 10px;
        }
        
        .legend-color {
            display: inline-block;
            width: 30px;
            height: 20px;
            border-radius: 3px;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .color-manual {
            background: #fff3e0;
            border: 2px solid #ef6c00;
        }
        
        .color-decision {
            background: #ffebee;
            border: 2px solid #c62828;
        }
        
        .color-system {
            background: #e3f2fd;
            border: 2px solid #1976d2;
        }
        
        @media print {
            .container {
                max-width: 100%;
            }
            
            .copy-button {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Back Link -->
        <a href="index.html" class="back-link">← Back to System Overview</a>
        
        <!-- Header -->
        <div class="header">
            <h1>Business Flow: Customer Order Intake</h1>
            <p>Automated order receiving, validation, and processing workflow</p>
        </div>

        <!-- Section 1: Visual Flowchart -->
        <div class="section">
            <h2>1. Visual Flowchart</h2>
            
            <div class="flowchart-container">
                <div class="mermaid">
flowchart TD
    A[Customer submits PO portal/API/email] --> B[System receives PO]
    B --> C{PO data valid?}
    C -->|No| D[System notifies user: PO error]
    D --> E[User corrects PO and resubmits]
    E --> B
    C -->|Yes| F[System checks customer status]
    F --> G{Customer active & credit OK?}
    G -->|No| H[System flags for sales/finance review]
    H --> I[Sales/Finance approve or reject]
    I -->|Reject| J[System notifies customer: PO rejected]
    I -->|Approve| K[Continue order intake]
    G -->|Yes| K
    K --> L[System creates order record]
    L --> M[System triggers automated planning]
    M --> N[Order status: Intake complete]
    N --> O[Notify relevant users sales, planning, warehouse]

    classDef system fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef decision fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef manual fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    
    class A,B,D,E,F,H,I,J,L,M,N,O manual
    class C,G decision
                </div>
            </div>
            
            <!-- Legend -->
            <div class="legend">
                <h4>Flow Legend:</h4>
                <div class="legend-item">
                    <span class="legend-color color-manual"></span>
                    <span>Process/Action Step</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color color-decision"></span>
                    <span>Decision Point</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color color-system"></span>
                    <span>System/Automated</span>
                </div>
            </div>
        </div>

        <!-- Section 2: Flow Explanation -->
        <div class="section">
            <h2>2. Flow Chart Explanation</h2>
            
            <div class="explanation-box">
                <p>This automated workflow manages the complete customer order intake process from initial PO submission through order creation and planning trigger. The system handles validation, customer verification, exception management, and automated handoffs to downstream processes.</p>
            </div>
            
            <h3>Process Flow Steps</h3>
            
            <div class="step-box">
                <h4>Step 1: Order Submission</h4>
                <p><strong>Action:</strong> Customer submits purchase order (PO) via portal, API integration, or email.</p>
                <p><strong>System:</strong> Multiple intake channels supported for flexibility.</p>
            </div>
            
            <div class="step-box">
                <h4>Step 2: Order Reception</h4>
                <p><strong>Action:</strong> System receives and captures PO data.</p>
                <p><strong>System:</strong> PO information is parsed and stored in temporary staging area.</p>
            </div>
            
            <div class="step-box">
                <h4>Step 3: PO Data Validation</h4>
                <p><strong>Decision:</strong> Is PO data valid?</p>
                <p><strong>Validation checks:</strong></p>
                <ul>
                    <li>Required fields present (customer, BOM codes, quantities, delivery date)</li>
                    <li>Data format correctness</li>
                    <li>Duplicate order detection</li>
                    <li>BOM codes exist in master data</li>
                    <li>Quantity within acceptable limits</li>
                </ul>
                <p><strong>If Invalid:</strong> System notifies user with specific error details → User corrects and resubmits → Returns to Step 2</p>
                <p><strong>If Valid:</strong> Proceeds to customer status check</p>
            </div>
            
            <div class="step-box">
                <h4>Step 4: Customer Status Check</h4>
                <p><strong>Action:</strong> System automatically checks customer account status.</p>
                <p><strong>System:</strong> Queries customer master data for active status and credit information.</p>
            </div>
            
            <div class="step-box">
                <h4>Step 5: Customer Credit Verification</h4>
                <p><strong>Decision:</strong> Is customer active and credit OK?</p>
                <p><strong>Verification checks:</strong></p>
                <ul>
                    <li>Customer account is active (not deactivated/suspended)</li>
                    <li>Credit status is approved (not on credit hold)</li>
                    <li>Outstanding balance within credit limit</li>
                    <li>No overdue invoices flagged for blocking</li>
                </ul>
                <p><strong>If Not OK:</strong> System flags order for manual sales/finance review → Proceeds to approval workflow</p>
                <p><strong>If OK:</strong> Continues to order intake</p>
            </div>
            
            <div class="step-box">
                <h4>Step 6: Manual Review (Exception Path)</h4>
                <p><strong>Action:</strong> Sales or Finance team reviews flagged order.</p>
                <p><strong>Options:</strong></p>
                <ul>
                    <li><strong>Reject:</strong> System notifies customer that PO is rejected with reason → Process ends</li>
                    <li><strong>Approve:</strong> Override credit hold or special approval granted → Continues to order intake</li>
                </ul>
            </div>
            
            <div class="step-box">
                <h4>Step 7: Order Record Creation</h4>
                <p><strong>Action:</strong> System creates official order record in database.</p>
                <p><strong>System:</strong></p>
                <ul>
                    <li>Generates unique order number</li>
                    <li>Stores order header and line items</li>
                    <li>Sets initial status to "New"</li>
                    <li>Links to customer and BOM master data</li>
                </ul>
            </div>
            
            <div class="step-box">
                <h4>Step 8: Automated Planning Trigger</h4>
                <p><strong>Action:</strong> System automatically triggers planning process.</p>
                <p><strong>System:</strong> Sends order to planning engine for stock checking and production scheduling (next business flow).</p>
            </div>
            
            <div class="step-box">
                <h4>Step 9: Status Update</h4>
                <p><strong>Action:</strong> Order status updated to "Intake Complete".</p>
                <p><strong>System:</strong> Order is now visible in all relevant dashboards and reports.</p>
            </div>
            
            <div class="step-box">
                <h4>Step 10: Stakeholder Notification</h4>
                <p><strong>Action:</strong> System notifies all relevant users.</p>
                <p><strong>Notifications sent to:</strong></p>
                <ul>
                    <li>Sales team: Order confirmation and acknowledgment</li>
                    <li>Planning team: New order requires planning</li>
                    <li>Warehouse team: Advance notice for potential material needs</li>
                    <li>Customer (optional): Order acknowledgment email with order number</li>
                </ul>
            </div>
            
            <h3>Key Automation Points</h3>
            
            <div class="automation-point">
                <h4>✓ Automatic PO Validation</h4>
                <p>All validation checks are performed automatically by the system - no manual data entry or verification required. Errors are caught immediately with specific feedback.</p>
            </div>
            
            <div class="automation-point">
                <h4>✓ System-Driven Customer Verification</h4>
                <p>Customer status and credit checks happen in real-time against master data. No need for manual lookups or phone calls to finance.</p>
            </div>
            
            <div class="automation-point">
                <h4>✓ Exception-Based Management</h4>
                <p>Only orders with validation failures or credit issues require manual intervention. Valid orders from approved customers flow through automatically.</p>
            </div>
            
            <div class="automation-point">
                <h4>✓ Automated Order Creation</h4>
                <p>Order records are created automatically with unique numbering, proper data linkages, and initial status - no manual order entry forms.</p>
            </div>
            
            <div class="automation-point">
                <h4>✓ Automatic Planning Handoff</h4>
                <p>The system automatically triggers the next process (planning and analysis) without requiring manual coordination or task assignment.</p>
            </div>
            
            <div class="automation-point">
                <h4>✓ Automated Notifications</h4>
                <p>All stakeholder notifications are sent automatically via email/in-app alerts - no need to manually inform departments of new orders.</p>
            </div>
        </div>

        <!-- Section 3: Mermaid Code -->
        <div class="section code-section">
            <h2>3. Mermaid Code Snippet</h2>
            <p>Copy the code below to use this flowchart in your own documentation or tools that support Mermaid diagrams.</p>
            
            <div class="code-container">
                <div class="code-header">
                    <span class="code-title">Mermaid Flowchart Code</span>
                    <button class="copy-button" onclick="copyCode()">Copy Code</button>
                </div>
                <pre><code id="mermaid-code">flowchart TD
    A[Customer submits PO portal/API/email] --> B[System receives PO]
    B --> C{PO data valid?}
    C -->|No| D[System notifies user: PO error]
    D --> E[User corrects PO and resubmits]
    E --> B
    C -->|Yes| F[System checks customer status]
    F --> G{Customer active & credit OK?}
    G -->|No| H[System flags for sales/finance review]
    H --> I[Sales/Finance approve or reject]
    I -->|Reject| J[System notifies customer: PO rejected]
    I -->|Approve| K[Continue order intake]
    G -->|Yes| K
    K --> L[System creates order record]
    L --> M[System triggers automated planning]
    M --> N[Order status: Intake complete]
    N --> O[Notify relevant users sales, planning, warehouse]

    classDef system fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef decision fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef manual fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    
    class A,B,D,E,F,H,I,J,L,M,N,O manual
    class C,G decision</code></pre>
            </div>
        </div>

        <!-- Footer -->
        <div style="margin-top: 60px; padding-top: 20px; border-top: 2px solid #333; text-align: center; color: #666; font-size: 12px;">
            <p>ERP Automation System - Business Flow Documentation</p>
            <p>Generated: October 2025</p>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        // Copy code function
        function copyCode() {
            const code = document.getElementById('mermaid-code').textContent;
            const button = document.querySelector('.copy-button');
            
            navigator.clipboard.writeText(code).then(function() {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(function() {
                    button.textContent = 'Copy Code';
                    button.classList.remove('copied');
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy: ', err);
            });
        }
    </script>
</body>
</html>